---
// src/components/AuthorCard.astro
import type { Author } from '../../types';

export interface Props {
  author: Author;
  postCount?: number;
}

const { author, postCount } = Astro.props;
---

<a
  href={`/authors/${author.slug}`}
  class="block bg-white rounded-lg shadow-md p-6 hover:shadow-xl transition-shadow duration-300"
>
  <div class="flex items-start space-x-4">
    {author.metadata?.profile_photo && (
      <img
        src={`${author.metadata.profile_photo.imgix_url}?w=160&h=160&fit=crop&auto=format,compress`}
        alt={author.title}
        class="w-20 h-20 rounded-full object-cover"
        width="80"
        height="80"
      />
    )}
    <div class="flex-1">
      <h3 class="text-xl font-bold text-gray-900 mb-2">
        {author.title}
      </h3>
      {author.metadata?.bio && (
        <p class="text-gray-600 text-sm mb-3 line-clamp-3">
          {author.metadata.bio}
        </p>
      )}
      {postCount !== undefined && (
        <p class="text-sm text-primary font-medium">
          {postCount} {postCount === 1 ? 'post' : 'posts'}
        </p>
      )}
    </div>
  </div>
</a>